{"_path":"/notes/ts/book/triple-slash-directives","_dir":"book","_draft":false,"_partial":false,"_locale":"","title":"三斜线指令(///<...>)","description":"除了传统的面向对象继承方式，还流行一种通过可重用组件创建类的方式，就是联合另一个简单类的代码。 你可能在Scala等语言里对mixins及其特性已经很熟悉了，但它在JavaScript中也是很流行的。","tags":"ts","author":"iczp","date":"2024-06-25T00:00:00.000Z","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"三斜线指令triple-slash-directives"},"children":[{"type":"text","value":"三斜线指令(Triple-Slash Directives)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"三斜线指令是包含单个XML标签的单行注释。 注释的内容会做为编译器指令使用。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"三斜线指令"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"仅"}]},{"type":"text","value":"可放在包含它的文件的最顶端。 一个三斜线指令的前面只能出现单行或多行注释，这包括其它的三斜线指令。 如果它们出现在一个语句或声明之后，那么它们会被当做普通的单行注释，并且不具有特殊的涵义。"}]},{"type":"element","tag":"h2","props":{"id":"reference-path"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference path=\"...\" />"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference path=\"...\" />"}]},{"type":"text","value":"指令是三斜线指令中最常见的一种。 它用于声明文件间的 "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"依赖"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"三斜线引用告诉编译器在编译过程中要引入的额外的文件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当使用"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--out"}]},{"type":"text","value":"或"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--outFile"}]},{"type":"text","value":"时，它也可以做为调整输出内容顺序的一种方法。 文件在输出文件内容中的位置与经过预处理后的输入顺序一致。"}]},{"type":"element","tag":"h3","props":{"id":"预处理输入文件"},"children":[{"type":"text","value":"预处理输入文件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"编译器会对输入文件进行预处理来解析所有三斜线引用指令。 在这个过程中，额外的文件会加到编译过程中。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个过程会以一些"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"根文件"}]},{"type":"text","value":"开始； 它们是在命令行中指定的文件或是在 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"text","value":"中的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"files\""}]},{"type":"text","value":"列表里的文件。 这些根文件按指定的顺序进行预处理。 在一个文件被加入列表前，它包含的所有三斜线引用都要被处理，还有它们包含的目标。 三斜线引用以它们在文件里出现的顺序，使用深度优先的方式解析。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一个三斜线引用路径是相对于包含它的文件的，如果不是根文件。"}]},{"type":"element","tag":"h3","props":{"id":"错误"},"children":[{"type":"text","value":"错误"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"引用不存在的文件会报错。 一个文件用三斜线指令引用自己会报错。"}]},{"type":"element","tag":"h3","props":{"id":"使用-noresolve"},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--noResolve"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果指定了"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--noResolve"}]},{"type":"text","value":"编译选项，三斜线引用会被忽略；它们不会增加新文件，也不会改变给定文件的顺序。"}]},{"type":"element","tag":"h2","props":{"id":"reference-types"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference types=\"...\" />"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"与 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference path=\"...\" />"}]},{"type":"text","value":"指令相似，这个指令是用来声明 "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"依赖"}]},{"type":"text","value":"的； 一个 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference types=\"...\" />"}]},{"type":"text","value":"指令则声明了对某个包的依赖。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对这些包的名字的解析与在 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":"语句里对模块名的解析类似。 可以简单地把三斜线类型引用指令当做 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":"声明的包。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，把 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference types=\"node\" />"}]},{"type":"text","value":"引入到声明文件，表明这个文件使用了 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@types/node/index.d.ts"}]},{"type":"text","value":"里面声明的名字； 并且，这个包需要在编译阶段与声明文件一起被包含进来。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"仅当在你需要写一个"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"d.ts"}]},{"type":"text","value":"文件时才使用这个指令。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于那些在编译阶段生成的声明文件，编译器会自动地添加"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference types=\"...\" />"}]},{"type":"text","value":"； "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"当且仅当"}]},{"type":"text","value":"结果文件中使用了引用的包里的声明时才会在生成的声明文件里添加"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference types=\"...\" />"}]},{"type":"text","value":"语句。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若要在"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".ts"}]},{"type":"text","value":"文件里声明一个对"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@types"}]},{"type":"text","value":"包的依赖，使用"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--types"}]},{"type":"text","value":"命令行选项或在"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"text","value":"里指定。 查看 "},{"type":"element","tag":"a","props":{"href":"../project-configuration/tsconfig-json"},"children":[{"type":"text","value":"在"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"text","value":"里使用"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@types"}]},{"type":"text","value":"，"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"typeRoots"}]},{"type":"text","value":"和"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"types"}]}]},{"type":"text","value":"了解详情。"}]},{"type":"element","tag":"h2","props":{"id":"reference-no-default-libtrue"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference no-default-lib=\"true\"/>"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个指令把一个文件标记成"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"默认库"}]},{"type":"text","value":"。 你会在 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lib.d.ts"}]},{"type":"text","value":"文件和它不同的变体的顶端看到这个注释。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个指令告诉编译器在编译过程中"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"不要"}]},{"type":"text","value":"包含这个默认库（比如，"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"lib.d.ts"}]},{"type":"text","value":"）。 这与在命令行上使用 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--noLib"}]},{"type":"text","value":"相似。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还要注意，当传递了"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--skipDefaultLibCheck"}]},{"type":"text","value":"时，编译器只会忽略检查带有"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <reference no-default-lib=\"true\"/>"}]},{"type":"text","value":"的文件。"}]},{"type":"element","tag":"h2","props":{"id":"amd-module"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <amd-module />"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"默认情况下生成的AMD模块都是匿名的。 但是，当一些工具需要处理生成的模块时会产生问题，比如 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"r.js"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"amd-module"}]},{"type":"text","value":"指令允许给编译器传入一个可选的模块名："}]},{"type":"element","tag":"h5","props":{"id":"amdmodulets"},"children":[{"type":"text","value":"amdModule.ts"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes github-dark github-dark monokai","code":"///<amd-module name='NamedModule'/>\nexport class C {\n}\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"///<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#85E89D;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"amd-module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":" name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"'NamedModule'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E;--shiki-default-text-decoration:inherit;--shiki-dark-text-decoration:inherit;--shiki-sepia-text-decoration:underline"},"children":[{"type":"text","value":" C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这会将"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"NamedModule"}]},{"type":"text","value":"传入到AMD "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"define"}]},{"type":"text","value":"函数里："}]},{"type":"element","tag":"h5","props":{"id":"amdmodulejs"},"children":[{"type":"text","value":"amdModule.js"}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark github-dark monokai","code":"define(\"NamedModule\", [\"require\", \"exports\"], function (require, exports) {\n    var C = (function () {\n        function C() {\n        }\n        return C;\n    })();\n    exports.C = C;\n});\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"define"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"NamedModule\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"require\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"exports\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFAB70;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFAB70;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"    var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"        function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":" C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"    })();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"    exports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" C"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"});\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"amd-dependency"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <amd-dependency />"}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"注意"}]},{"type":"text","value":"：这个指令被废弃了。使用"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"import \"moduleName\";"}]},{"type":"text","value":"语句代替。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/// <amd-dependency path=\"x\" />"}]},{"type":"text","value":"告诉编译器有一个非TypeScript模块依赖需要被注入，做为目标模块"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"require"}]},{"type":"text","value":"调用的一部分。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"amd-dependency"}]},{"type":"text","value":"指令也可以带一个可选的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"name"}]},{"type":"text","value":"属性；它允许我们为amd-dependency传入一个可选名字："}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes github-dark github-dark monokai","code":"/// <amd-dependency path=\"legacy/moduleA\" name=\"moduleA\"/>\ndeclare var moduleA:MyType\nmoduleA.callStuff()\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"/// <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#85E89D;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"amd-dependency"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":" path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"legacy/moduleA\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":" name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"moduleA\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"declare"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":" var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" moduleA"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E;--shiki-default-text-decoration:inherit;--shiki-dark-text-decoration:inherit;--shiki-sepia-text-decoration:underline"},"children":[{"type":"text","value":"MyType\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"moduleA."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"callStuff"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"()\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"生成的JavaScript代码："}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark github-dark monokai","code":"define([\"require\", \"exports\", \"legacy/moduleA\"], function (require, exports, moduleA) {\n    moduleA.callStuff()\n});\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"define"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"require\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"exports\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"\"legacy/moduleA\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFAB70;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFAB70;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFAB70;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic"},"children":[{"type":"text","value":"moduleA"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"    moduleA."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"callStuff"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"});\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"参考"},"children":[{"type":"text","value":"参考"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"}]}],"toc":{"title":"","searchDepth":5,"depth":5,"links":[{"id":"reference-path","depth":2,"text":"/// <reference path=\"...\" />","children":[{"id":"预处理输入文件","depth":3,"text":"预处理输入文件"},{"id":"错误","depth":3,"text":"错误"},{"id":"使用-noresolve","depth":3,"text":"使用 --noResolve"}]},{"id":"reference-types","depth":2,"text":"/// <reference types=\"...\" />"},{"id":"reference-no-default-libtrue","depth":2,"text":"/// <reference no-default-lib=\"true\"/>"},{"id":"amd-module","depth":2,"text":"/// <amd-module />","children":[{"id":"amdmodulets","depth":5,"text":"amdModule.ts"},{"id":"amdmodulejs","depth":5,"text":"amdModule.js"}]},{"id":"amd-dependency","depth":2,"text":"/// <amd-dependency />","children":[{"id":"参考","depth":3,"text":"参考"}]}]}},"_type":"markdown","_id":"content:notes:ts:book:22.triple-slash-directives.md","_source":"content","_file":"notes/ts/book/22.triple-slash-directives.md","_extension":"md"}