import{u as P}from"./BXDelJFN.js";import{r as f,A as o,a2 as I}from"./BotNLUr-.js";import{u as w}from"./CGceqzPg.js";import{f as m}from"./_MiPQb9e.js";const v=r=>{const s=(r.endsWith("/")?r.slice(0,-1):r).split("/");return s[s.length-1]},E=async({path:r})=>{const{data:i}=await P("navigation",()=>I()),s=f([]),{items:c,toggleOpen:h,activeItem:d,setActive:C,list:D}=w({items:i.value,open:(t,e)=>e>1,action:t=>{t.tags=m(t.tags),t.categories=m(t.categories)},active:(t,e,a,p)=>t._path===r}),_=t=>t?D.value.filter(e=>e.tags.some(a=>(a==null?void 0:a.toLocaleLowerCase())==t.toLocaleLowerCase())).length:0,u=t=>t?t.map((e,a)=>{if(!e.$isDir&&e._path.startsWith("/tags/")){const p=v(e._path);e.$count=_(p)}return s.value.push(e),e.children&&(e.children=u(e.children)),e}):[],n=o(()=>s.value.filter(t=>!t.$isDir&&t._path.startsWith("/tags/")).reduce((t,e)=>{const a=v(e._path);return a&&(t[a]=e),t},{})),l=o(()=>s.value.find(t=>t._path==r)),$=o(()=>{var t,e;return(e=(t=l.value)==null?void 0:t.tags)==null?void 0:e.map(a=>n.value[a]).filter(a=>a)}),L=t=>t!=null&&t.$parents?t==null?void 0:t.$parents():[],g=f();return(()=>{g.value=u(c.value),s.value=s.value.map(t=>{var e;return t.$isDir||(t.tagEntities=(e=t.tags)==null?void 0:e.map(a=>n.value[a]).filter(a=>a)),t})})(),{list:s,items:g,tagDict:n,toggleOpen:h,activeItem:d,setActive:C,doc:l,tagItems:$,getParents:L}};export{v as g,E as u};
