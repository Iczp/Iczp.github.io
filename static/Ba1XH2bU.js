import{u as S}from"./DTEFmjOb.js";import{r as v}from"./DVvsI1PC.js";const f=e=>Array.isArray(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)>0,z=({items:e,open:E=(c,o,u,$)=>!0,active:P=(c,o,u,$)=>!1,sort:C,action:d})=>{let c=0;const o=v(),u=S(),$=v(),A=v([]),D=r=>{var s,a;if(!r||(r.$isDir=f(r),!r.$isDir))return;r.$fileCount=(s=r.children)==null?void 0:s.filter(t=>!f(t)).length;const n=(a=r.children)==null?void 0:a.filter(t=>f(t));r.$dirCount=n==null?void 0:n.length,n==null||n.forEach(t=>D(t))},g=r=>{var n;return r.$isDir&&(r.$totalFileCount=r.$fileCount||0,r.$totalDirCount=r.$dirCount||0,(n=r.children)==null||n.filter(f).forEach(s=>{const a=g(s);r.$totalFileCount=(r.$totalFileCount||0)+(a.$totalFileCount||0),r.$totalDirCount=(r.$totalDirCount||0)+(a.$totalDirCount||0)})),r},p=(r,n=0,s=[])=>{if(!r)return[];const a=r.map((t,l)=>{var O,w;c++,d&&d(t,n,l,s);let F;const i=()=>[t,...s];t.children&&(F=p(t.children,n+1,i()));const I=P(t,n,l,i()),h={...t,$index:l,$depth:n,$row:c,$isOpen:E(t,n,l,i()),$isActive:I,children:F,$parents:i};return I&&(o.value=h,u.setPaths((O=o.value)!=null&&O.$parents?(w=o.value)==null?void 0:w.$parents():[])),A.value.push(h),h});return C&&a.sort((t,l)=>C(t,l,n)),a},y=(r,n)=>{if(!r)return;r.$isActive=n;const s=r==null?void 0:r.$parents;s?s().map(a=>{a.$isActive=n}):console.warn("parents",s)},T=r=>{var n,s;o.value&&y(o.value,!1),y(r,!0),o.value=r,u.setPaths((n=o.value)!=null&&n.$parents?(s=o.value)==null?void 0:s.$parents():[]),u.close()},b=r=>{r.$isOpen=!r.$isOpen};return(()=>{const r=Array.isArray(e)?Array.from(e):[];r.forEach(n=>{D(n),g(n)}),$.value=p(r)})(),{formatItems:p,toggleOpen:b,items:$,activeItem:o,setActive:T,list:A}};export{f as i,z as u};
