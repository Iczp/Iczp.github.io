import{u as S}from"./DYQ6fb6b.js";import{r as O,A as j}from"./BotNLUr-.js";const f=a=>Array.isArray(a==null?void 0:a.children)&&(a==null?void 0:a.children.length)>0,B=({items:a,open:w=($,o,c,u)=>!0,active:P=($,o,c,u)=>!1,sort:h,action:v})=>{let $=-1;const o=O(),c=S(),u=O(),C=r=>{var t,e;if(!r||(r.$isDir=f(r),!r.$isDir))return;r.$fileCount=(t=r.children)==null?void 0:t.filter(s=>!f(s)).length;const n=(e=r.children)==null?void 0:e.filter(s=>f(s));r.$dirCount=n==null?void 0:n.length,n==null||n.forEach(s=>C(s))},d=r=>{var n;return r.$isDir&&(r.$totalFileCount=r.$fileCount||0,r.$totalDirCount=r.$dirCount||0,(n=r.children)==null||n.filter(f).forEach(t=>{const e=d(t);r.$totalFileCount=(r.$totalFileCount||0)+(e.$totalFileCount||0),r.$totalDirCount=(r.$totalDirCount||0)+(e.$totalDirCount||0)})),r},p=(r,n=0,t=[])=>{if(!r)return[];const e=r.map((s,l)=>{var E,I;$++,v&&v(s,n,l,t);let g;const i=()=>[s,...t];s.children&&(g=p(s.children,n+1,i()));const y=P(s,n,l,i()),F={...s,$index:l,$depth:n,$row:$,$isOpen:w(s,n,l,i()),$isActive:y,children:g,$parents:i};return y&&(o.value=F,c.setPaths((E=o.value)!=null&&E.$parents?(I=o.value)==null?void 0:I.$parents().reverse():[])),F});return h&&e.sort((s,l)=>h(s,l,n)),e},A=(r,n)=>{if(!r)return;r.$isActive=n;const t=r==null?void 0:r.$parents;t?t().map(e=>{e.$isActive=n}):console.warn("parents",t)},T=r=>{var n,t;o.value&&A(o.value,!1),A(r,!0),o.value=r,c.setPaths((n=o.value)!=null&&n.$parents?(t=o.value)==null?void 0:t.$parents().reverse():[]),c.close()},b=r=>{r.$isOpen=!r.$isOpen},D=(r,n=[])=>(r==null||r.forEach(t=>{n.push(t),D(t.children,n)}),n),L=j(()=>D(u.value));return(()=>{const r=Array.isArray(a)?Array.from(a):[];r.forEach(n=>{C(n),d(n)}),u.value=p(r)})(),{formatItems:p,toggleOpen:b,items:u,activeItem:o,setActive:T,list:L}};export{f as i,B as u};
