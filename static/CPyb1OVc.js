import S from"./Q5taHewe.js";import V from"./BC_8PzQE.js";import D from"./cxgPiCyT.js";import{_ as E}from"./YH9W0n9P.js";import M from"./BIAWVO71.js";import{_ as U}from"./BZ4SKyRi.js";import{_ as G}from"./C9bDzsu-.js";import{N as I}from"./BgO1MW2x.js";import{d as O,E as P,h,r as w,s as J,G as K,o,c as n,j as e,e as c,w as _,t as a,f as l,z as Q,A as m,F as k,k as C,a as W,g as b,q as X}from"./CqVEwMom.js";import{u as Y}from"./CBP6Txep.js";import{u as Z}from"./B4MZC06A.js";import"./BQkc-AXV.js";import"./DlAUqK2U.js";import"./DF-a216x.js";import"./WFIYHUth.js";import"./ElkFyO1H.js";import"./_MiPQb9e.js";const ee={class:"flex flex-row gap-4 mt-8"},te={class:"flex flex-col w-48"},se=["href"],oe={class:"flex flex-row items-center text-sm"},ne={class:"mx-2"},ae={class:"flex flex-row gap-1 items-center"},le={class:"text-slate-400"},ce={class:"flex flex-1 flex-col gap-4"},ie={key:0},re={class:"flex flex-col gap-2"},_e={class:"text-sm text-gray-600"},de={class:"grid grid-cols-1 gap-4"},ue={class:"flex flex-row justify-between gap-4"},me=e("aside",{class:"size-24 rounded-md flex justify-center items-center border border-gray-500 border-opacity-20"}," imag ",-1),fe={class:"flex flex-1 flex-col gap-1"},pe={class:"flex flex-row justify-between items-center"},xe={class:"text-base"},he={class:"flex flex-row items-center gap-2"},ge={key:1},ye={class:"text-sm text-gray-600"},ve={class:"line-clamp-2 min-h-10"},we={class:"flex flex-row-reverse justify-between text-xs py-1"},ke={key:0,class:"text-green-400"},Ce={key:1,class:"text-sky-500"},Oe=O({__name:"[id]",async setup(be){let s,r;const $=P(),{params:d,query:$e}=$;([s,r]=h(()=>W()),s=await s,r(),s).public.content;const{list:Ne,getAllByTags:z}=([s,r]=h(()=>Y()),s=await s,r(),s),N=w(z([d.id])),g=`/notes/_tags/${d.id}`,{data:i}=([s,r]=h(()=>Z(g,()=>X(g).findOne(),"$oqgUTpyPuf")),s=await s,r(),s),u=w(),f=J(()=>{if(u.value){const y=parseInt(window.getComputedStyle(u.value).lineHeight)*2;return u.value.clientHeight>=y}return!1});K(()=>{});const R=()=>{console.log("showFullText",f.value)};return(j,y)=>{const p=S,A=V,T=D,B=E,H=M,L=U,q=G,F=I;return o(),n("div",ee,[e("aside",te,[c(T,{class:"flex flex-col gap-2"},{default:_(({item:t})=>[e("a",{href:`/tags/${t.name}`,class:"flex flex-row justify-between items-center py-1"},[e("h3",oe,[c(p,{name:t.icon,class:"size-4"},null,8,["name"]),e("span",ne,a(t.title),1)]),e("div",ae,[e("span",le,a(t.count),1),c(A,{class:"size-3"})])],8,se)]),_:1})]),e("article",ce,[l(i)?(o(),n("section",ie,[c(L,{title:l(i).title||l(d).id},{header:_(()=>[e("div",re,[e("h3",null,[c(p,{name:l(i).icon,class:"size-4 mr-2"},null,8,["name"]),e("span",null,a(l(i).title||l(d).id),1)]),e("p",_e,a(l(i).description),1)])]),default:_(()=>[e("div",{ref_key:"textRef",ref:u,class:Q(["relative prose dark:prose-dark",{"line-clamp-2":!f.value}])},[c(H,{value:l(i)},{default:_(()=>[c(B,{value:l(i)},null,8,["value"]),f.value?(o(),n("a",{key:0,class:"absolute bottom-0 right-0",onClick:R},"show more")):m("",!0)]),_:1},8,["value"])],2)]),_:1},8,["title"])])):m("",!0),e("section",null,[e("ul",de,[(o(!0),n(k,null,C(N.value,t=>(o(),n("li",{key:t._path,class:""},[c(F,{to:`${t._path}`,class:"card flex flex-col hover:card-hover p-4"},{default:_(()=>[e("div",ue,[me,e("main",fe,[e("h3",pe,[e("div",xe,[e("span",null,a(t.title),1)]),e("div",he,[(o(!0),n(k,null,C(t.tags,v=>(o(),b(q,{value:v,key:v},{default:_(({tag:x})=>[x.icon?(o(),b(p,{key:0,name:x.icon,class:"size-4"},null,8,["name"])):(o(),n("span",ge,a(x.title),1))]),_:2},1032,["value"]))),128))])]),e("div",ye,[e("p",ve,a(t.description||t.title),1)]),e("div",we,[t.date?(o(),n("div",ke,a(t.date),1)):m("",!0),t.author?(o(),n("div",Ce,a(t.author),1)):m("",!0)])])])]),_:2},1032,["to"])]))),128))])])])])}}});export{Oe as default};
