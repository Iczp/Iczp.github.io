import S from"./BMjMnJU9.js";import V from"./mgRJfTxm.js";import{u as D,i as H}from"./CGceqzPg.js";import{e as N,r as p,aq as O,K as v,l as j,ar as z,o as h,c as w,b as s,a as r,J as g,f as a,t as x,a8 as P,a9 as q,w as A,g as J}from"./BotNLUr-.js";import K from"./cJ836m-P.js";import{_ as M}from"./DlAUqK2U.js";import"./BQkc-AXV.js";import"./DYQ6fb6b.js";const R={class:"!p-4 page-toc box"},W={class:"flex flex-row items-center"},F=["onClick"],G={class:"flex flex-row items-center overflow-hidden"},L={class:"inline-flex"},Q=["onClick"],U=["onClick"],X=N({__name:"Toc",props:{value:{},open:{type:Boolean,default:!1},title:{default:"目录"},bodyClass:{}},setup(C){var _;const m=C,b=e=>H(e)?void 0:e._path,{items:y,list:d,toggleOpen:k}=D({items:((_=m.value)==null?void 0:_.links)||[]}),l=p(m.open),T=()=>{l.value=!l.value},$=p(""),{y:B}=O(window),c=p(0);v(B,e=>{const i=e+64;let t="";d.value.forEach((n,o)=>{const u=document.getElementById(n.id);u&&u.offsetTop<=i&&(t=n.id,c.value=o)}),$.value=t,console.log("scrollY",e,t,c.value)}),v(c,e=>{console.log("activeIndex",e,d.value[c.value||0])}),j(()=>{console.log("list.value",d.value)});const I=e=>getComputedStyle(document.documentElement).getPropertyValue(e);z();const E=e=>{const i=document.getElementById(e);if(i){const t=parseInt(I("--header-height"),10),n=i.offsetTop-t;window.scrollTo({top:n,behavior:"smooth"})}};return(e,i)=>{const t=S,n=V;return h(),w("div",R,[s("h3",{class:"flex flex-row items-center justify-between gap-4",onClick:T},[s("div",W,[r(t,{name:"ic:outline-list-alt",class:"mr-2 size-6"}),s("span",{class:g(["text-base truncate",{hidden:!a(l)}])},x(e.title),3)]),r(n,{dir:a(l)?"down":"right",class:"ml-1"},null,8,["dir"])]),P(s("div",{class:g(["mt-2",e.bodyClass])},[r(K,{items:a(y)||[],"active-row":a(c)},{default:A(({item:o,depth:u,index:Y,parents:Z,row:ee})=>[s("div",{class:"flex flex-row items-center justify-between gap-2 py-1 toc-item",onClick:f=>b(o)},[s("h3",G,[s("div",L,[r(t,{name:o.$row==0?"ic:outline-list-alt":"ic:outline-numbers",class:"text-base mx-1.5"},null,8,["name"])]),s("a",{class:"truncate cursor-pointer",onClick:f=>E(o.id)},x(o.text),9,Q)]),o.$isDir?(h(),w("span",{key:0,onClick:f=>a(k)(o)},[r(n,{dir:o.$isOpen?"down":"right"},null,8,["dir"])],8,U)):J("",!0)],8,F)]),_:1},8,["items","active-row"])],2),[[q,a(l)]])])}}}),re=M(X,[["__scopeId","data-v-e9bad32c"]]);export{re as default};
